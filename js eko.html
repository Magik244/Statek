<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kółko i Krzyżyk</title>
    <style>
        body{
            font-family:'Arial';
            text-align:center;
        }
        table{
            border-collapse:collapse;
            margin:auto;
        }
        th{
            font-size:5em;
            width:100px;
            height:100px;
            cursor:pointer;
            border:2px solid #000;
        }
        #container{
            width:300px;
            margin:auto;
        }
        #wynik{
            font-size:1.5em;
            margin-bottom:10px;
            height:30px;
        }
        #restart{
            margin-top:15px;
            padding:10px 20px;
            font-size:1.2em;
            display:none;
        }
    </style>
</head>
<body>

    <h2 id="wynik"></h2>

    <div id="container">
        <h2>Gracz: <span id="playerOutput">1</span></h2>

        <table>
            <tr>
                <th></th><th></th><th></th>
            </tr>
            <tr>
                <th></th><th></th><th></th>
            </tr>
            <tr>
                <th></th><th></th><th></th>
            </tr>
        </table>

        <button id="restart">Restart</button>
    </div>
        
    <script>
        const cells = document.querySelectorAll('th')
        const playerOutput = document.querySelector('#playerOutput')
        const wynik = document.querySelector('#wynik')
        const restart = document.querySelector('#restart')
        let player = true
    
        const board = [
            null,null,null,
            null,null,null,
            null,null,null
        ]
        const wins = [
            [0,1,2],[3,4,5],[6,7,8],
            [0,3,6],[1,4,7],[2,5,8],
            [0,4,8],[2,4,6]
        ]

        cells.forEach((c,i)=>{
            c.addEventListener('click',()=>{
                if(board[i]!==null) return

                board[i] = player ? 1 : 0
                c.innerText = player ? "X" : "O"

                if(checkWin()){
                    wynik.innerText = player ? "Wygrywa Gracz 1 (X)" : "Wygrywa Gracz 2 (O)"
                    block()
                    restart.style.display="inline-block"
                    return
                }

                if(board.every(x=>x!==null)){
                    wynik.innerText = "Remis"
                    restart.style.display="inline-block"
                    return
                }

                player = !player
                playerOutput.innerText = player ? 1 : 2
            })
        })

        function checkWin(){
            for(const w of wins){
                if(board[w[0]]!==null && board[w[0]]===board[w[1]] && board[w[1]]===board[w[2]])
                    return true
            }
            return false
        }

        function block(){
            cells.forEach(c=>c.style.pointerEvents="none")
        }
        restart.addEventListener('click',()=>{
            board.fill(null)
            cells.forEach(c=>{
                c.innerText=""
                c.style.pointerEvents="auto"
            })
            wynik.innerText=""
            restart.style.display="none"
            player=true
            playerOutput.innerText=1
        })
    </script>

</body>
</html>
